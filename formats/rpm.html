<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Rpm Plugin &mdash; sbt-native-packager 1.0.6 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.2.0/yeti/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="sbt-native-packager 1.0.6 documentation" href="../index.html" />
    <link rel="up" title="Packaging Formats" href="index.html" />
    <link rel="next" title="Docker Plugin" href="docker.html" />
    <link rel="prev" title="Debian Plugin" href="debian.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          sbt-native-packager</a>
        <span class="navbar-text navbar-version pull-left"><b>1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted.html#packaging-formats">Packaging Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted.html#archetypes">Archetypes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../gettingstarted.html#sitemap">Sitemap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../archetypes/java_app/index.html">Java Application Archetype</a></li>
<li class="toctree-l1"><a class="reference internal" href="../archetypes/java_server/index.html">Java Server Application Archetype</a></li>
<li class="toctree-l1"><a class="reference internal" href="../archetypes/akka_app/index.html">Akka Microkernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../archetypes/cheatsheet.html">Archetype Cheatsheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../archetypes/index.html">Project Archetypes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Packaging Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/index.html">Advanced Topics</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Rpm Plugin</a><ul>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#build">Build</a><ul>
<li><a class="reference internal" href="#required-settings">Required Settings</a></li>
<li><a class="reference internal" href="#or-higher">1.0 or higher</a></li>
<li><a class="reference internal" href="#or-lower">0.8 or lower</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
<li><a class="reference internal" href="#settings">Settings</a><ul>
<li><a class="reference internal" href="#informational-settings">Informational Settings</a></li>
<li><a class="reference internal" href="#dependency-settings">Dependency Settings</a></li>
<li><a class="reference internal" href="#meta-settings">Meta Settings</a></li>
<li><a class="reference internal" href="#scriptlet-settings">Scriptlet Settings</a></li>
<li><a class="reference internal" href="#systemv-start-script-settings">SystemV Start Script Settings</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tasks">Tasks</a></li>
<li><a class="reference internal" href="#customize">Customize</a><ul>
<li><a class="reference internal" href="#rpm-prefix">Rpm Prefix</a></li>
<li><a class="reference internal" href="#rpmchangelogfile">rpmChangelogFile</a></li>
<li><a class="reference internal" href="#template-changes">Template Changes</a></li>
<li><a class="reference internal" href="#scriptlet-changes">Scriptlet Changes</a></li>
<li><a class="reference internal" href="#jar-repackaging">Jar Repackaging</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="debian.html" title="Previous Chapter: Debian Plugin"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Debian Plugin</span>
    </a>
  </li>
  <li>
    <a href="docker.html" title="Next Chapter: Docker Plugin"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Docker Plugin &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/formats/rpm.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="rpm-plugin">
<h1><a class="toc-backref" href="#id1">Rpm Plugin</a><a class="headerlink" href="#rpm-plugin" title="Permalink to this headline">¶</a></h1>
<p>RedHat <tt class="docutils literal"><span class="pre">rpm</span></tt> files support a very advanced number of features.  To take full advantage of this environment,
it&#8217;s best to understand how the <tt class="docutils literal"><span class="pre">rpm</span></tt> package system works.
<a class="reference external" href="http://fedoraproject.org/wiki/How_to_create_an_RPM_package">http://fedoraproject.org/wiki/How_to_create_an_RPM_package</a> is a good tutorial, but it focuses on building
packages from source.   The sbt-native-packager takes the approach that SBT has built your source and generated
&#8216;binary&#8217; packages.</p>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#rpm-plugin" id="id1">Rpm Plugin</a><ul>
<li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li>
<li><a class="reference internal" href="#build" id="id3">Build</a></li>
<li><a class="reference internal" href="#configuration" id="id4">Configuration</a></li>
<li><a class="reference internal" href="#settings" id="id5">Settings</a></li>
<li><a class="reference internal" href="#tasks" id="id6">Tasks</a></li>
<li><a class="reference internal" href="#customize" id="id7">Customize</a></li>
</ul>
</li>
</ul>
</div>
<div class="alert alert-info" role="alert">
  <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
  The rpm plugin depends on the linux plugin. For general linux settings read the
  <a href="linux.html">Linux Plugin Documentation</a>
</div><div class="section" id="requirements">
<h2><a class="toc-backref" href="#id2">Requirements</a><a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>You need the following applications installed</p>
<ul class="simple">
<li>rpm</li>
<li>rpm-build</li>
</ul>
</div>
<div class="section" id="build">
<h2><a class="toc-backref" href="#id3">Build</a><a class="headerlink" href="#build" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash"><div class="highlight"><pre>sbt rpm:packageBin
</pre></div>
</div>
<div class="section" id="required-settings">
<h3>Required Settings<a class="headerlink" href="#required-settings" title="Permalink to this headline">¶</a></h3>
<p>A rpm package needs some mandatory settings to be valid. Make sure
you have these settings in your build:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">rpmVendor</span> <span class="o">:=</span> <span class="s">&quot;typesafe&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="or-higher">
<h3>1.0 or higher<a class="headerlink" href="#or-higher" title="Permalink to this headline">¶</a></h3>
<p>Enables the rpm plugin</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">enablePlugins</span><span class="o">(</span><span class="nc">RpmPlugin</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="or-lower">
<h3>0.8 or lower<a class="headerlink" href="#or-lower" title="Permalink to this headline">¶</a></h3>
<p>For this versions rpm packaging is automatically activated.
See the <a class="reference internal" href="../gettingstarted.html"><em>Getting Started</em></a> page for information
on how to enable sbt native packager.</p>
</div>
</div>
<div class="section" id="configuration">
<h2><a class="toc-backref" href="#id4">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>Settings and Tasks inherited from parent plugins can be scoped with <tt class="docutils literal"><span class="pre">Rpm</span></tt>.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">linuxPackageMappings</span> <span class="n">in</span> <span class="nc">Rpm</span> <span class="o">:=</span> <span class="n">linuxPackageMappings</span><span class="o">.</span><span class="n">value</span>
</pre></div>
</div>
</div>
<div class="section" id="settings">
<h2><a class="toc-backref" href="#id5">Settings</a><a class="headerlink" href="#settings" title="Permalink to this headline">¶</a></h2>
<div class="section" id="informational-settings">
<h3>Informational Settings<a class="headerlink" href="#informational-settings" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">packageName</span> <span class="pre">in</span> <span class="pre">Rpm</span></tt></dt>
<dd>The name of the package for the rpm.
Its value defines the first component of the rpm file name
(<tt class="docutils literal"><span class="pre">packageName-version-rpmRelease.packageArchitecture.rpm</span></tt>), as well as the <tt class="docutils literal"><span class="pre">Name:</span></tt>
tag in the spec file.
Its default value is drawn from <tt class="docutils literal"><span class="pre">packageName</span> <span class="pre">in</span> <span class="pre">Linux</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">version</span> <span class="pre">in</span> <span class="pre">Rpm</span></tt></dt>
<dd>The version of the package for rpm.
Takes the form <tt class="docutils literal"><span class="pre">x.y.z</span></tt>, and note that there can be no dashes in this version string.
It defines the second component of the rpm file name
(<tt class="docutils literal"><span class="pre">packageName-version-rpmRelease.packageArchitecture.rpm</span></tt>), as well as the <tt class="docutils literal"><span class="pre">Version:</span></tt>
tag in the spec file.
Its default value is drawn from the project defined <tt class="docutils literal"><span class="pre">version</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">rpmRelease</span></tt></dt>
<dd>The release number is the package&#8217;s version. When the sofware is first packaged at a
particular version, the release should be <tt class="docutils literal"><span class="pre">&quot;1&quot;</span></tt>. If the software is repackaged at
the same version, the release number should be incremented, and dropped back to <tt class="docutils literal"><span class="pre">&quot;1&quot;</span></tt>
when the software version is new.
Its value defines the third component of the rpm file name
(<tt class="docutils literal"><span class="pre">packageName-version-rpmRelease.packageArchitecture.rpm</span></tt>), as well as the <tt class="docutils literal"><span class="pre">Release:</span></tt>
tag in the spec file.
Its default value is <tt class="docutils literal"><span class="pre">&quot;1&quot;</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">packageArchitecture</span> <span class="pre">in</span> <span class="pre">Rpm</span></tt></dt>
<dd>The build architecture for the binary rpm.
Its value defines the fourth component of the rpm file name
(<tt class="docutils literal"><span class="pre">packageName-version-rpmRelease.packageArchitecture.rpm</span></tt>), as well as the <tt class="docutils literal"><span class="pre">BuildArch:</span></tt>
tag in the spec file.
Its default value is <tt class="docutils literal"><span class="pre">&quot;noarch&quot;</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">packageSummary</span> <span class="pre">in</span> <span class="pre">Rpm</span></tt></dt>
<dd>A brief, one-line summary of the package.
Note, the summary <strong>must not</strong> contain line separators or end in a period.
Its value defines the <tt class="docutils literal"><span class="pre">Summary:</span></tt> tag in the spec file, and its default
value is drawn from <tt class="docutils literal"><span class="pre">packageSummary</span> <span class="pre">in</span> <span class="pre">Linux</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">packageDescription</span> <span class="pre">in</span> <span class="pre">Rpm</span></tt></dt>
<dd>A longer, multi-line description of the package.
Its value defines the <tt class="docutils literal"><span class="pre">%description</span></tt> block in the spec file, and its
default value is drawn from <tt class="docutils literal"><span class="pre">packageDescription</span> <span class="pre">in</span> <span class="pre">Linux</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">rpmVendor</span></tt></dt>
<dd>The name of the company/user generating the RPM.</dd>
<dt><tt class="docutils literal"><span class="pre">rpmUrl</span></tt></dt>
<dd>A url associated with the software in the RPM.</dd>
<dt><tt class="docutils literal"><span class="pre">rpmLicense</span></tt></dt>
<dd>The license associated with software in the RPM.</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="dependency-settings">
<h3>Dependency Settings<a class="headerlink" href="#dependency-settings" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">rpmAutoreq</span></tt></dt>
<dd>Enable or disable the automatic processing of required packages.
Takes the form <tt class="docutils literal"><span class="pre">&quot;yes&quot;</span></tt> or <tt class="docutils literal"><span class="pre">&quot;no&quot;</span></tt>, defaults to <tt class="docutils literal"><span class="pre">&quot;yes&quot;</span></tt>.
Defines the <tt class="docutils literal"><span class="pre">AutoReq:</span></tt> tag in the spec file.</dd>
<dt><tt class="docutils literal"><span class="pre">rpmRequirements</span></tt></dt>
<dd>The RPM packages that are required to be installed for this RPM to work.</dd>
<dt><tt class="docutils literal"><span class="pre">rpmAutoprov</span></tt></dt>
<dd>Enable or disable the automatic processing of provided packages.
Takes the form <tt class="docutils literal"><span class="pre">&quot;yes&quot;</span></tt> or <tt class="docutils literal"><span class="pre">&quot;no&quot;</span></tt>, defaults to <tt class="docutils literal"><span class="pre">&quot;yes&quot;</span></tt>.
Defines the <tt class="docutils literal"><span class="pre">AutoProv:</span></tt> tag in the spec file.</dd>
<dt><tt class="docutils literal"><span class="pre">rpmProvides</span></tt></dt>
<dd>The RPM package names that this RPM provides.</dd>
<dt><tt class="docutils literal"><span class="pre">rpmPrerequisites</span></tt></dt>
<dd>The RPM packages this RPM needs before installation</dd>
<dt><tt class="docutils literal"><span class="pre">rpmObsoletes</span></tt></dt>
<dd>The packages this RPM allows you to remove</dd>
<dt><tt class="docutils literal"><span class="pre">rpmConflcits</span></tt></dt>
<dd>The packages this RPM conflicts with and cannot be installed with.</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="meta-settings">
<h3>Meta Settings<a class="headerlink" href="#meta-settings" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">rpmPrefix</span></tt></dt>
<dd>The path passed set as the base for the revocable package</dd>
<dt><tt class="docutils literal"><span class="pre">rpmChangelogFile</span></tt></dt>
<dd>External file to be imported and used to generate the changelog of the RPM.</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="scriptlet-settings">
<h3>Scriptlet Settings<a class="headerlink" href="#scriptlet-settings" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">rpmPretrans</span></tt></dt>
<dd>The <tt class="docutils literal"><span class="pre">%pretrans</span></tt> scriptlet to run.</dd>
<dt><tt class="docutils literal"><span class="pre">rpmPre</span></tt></dt>
<dd>The <tt class="docutils literal"><span class="pre">%pre</span></tt> scriptlet to run.</dd>
<dt><tt class="docutils literal"><span class="pre">rpmVerifyScript</span></tt></dt>
<dd>The <tt class="docutils literal"><span class="pre">%verifyscript%</span></tt> scriptlet to run</dd>
<dt><tt class="docutils literal"><span class="pre">rpmPost</span></tt></dt>
<dd>The <tt class="docutils literal"><span class="pre">%post</span></tt> scriptlet to run</dd>
<dt><tt class="docutils literal"><span class="pre">rpmPosttrans</span></tt></dt>
<dd>The <tt class="docutils literal"><span class="pre">%posttrans</span></tt> scriptlet to run</dd>
<dt><tt class="docutils literal"><span class="pre">rpmPreun</span></tt></dt>
<dd>The <tt class="docutils literal"><span class="pre">%preun</span></tt> scriptlet to run.</dd>
<dt><tt class="docutils literal"><span class="pre">rpmPostun</span></tt></dt>
<dd>The <tt class="docutils literal"><span class="pre">%postun</span></tt> scriptlet to run.</dd>
<dt><tt class="docutils literal"><span class="pre">rpmBrpJavaRepackJars</span></tt></dt>
<dd>appends <tt class="docutils literal"><span class="pre">__os_install_post</span></tt> scriptlet to <tt class="docutils literal"><span class="pre">rpmPre</span></tt> avoiding jar repackaging</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="systemv-start-script-settings">
<h3>SystemV Start Script Settings<a class="headerlink" href="#systemv-start-script-settings" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">rpmDaemonLogFile</span></tt></dt>
<dd>File name of the log generated by application daemon.</dd>
</dl>
</div></blockquote>
</div>
</div>
<div class="section" id="tasks">
<h2><a class="toc-backref" href="#id6">Tasks</a><a class="headerlink" href="#tasks" title="Permalink to this headline">¶</a></h2>
<p>The Rpm support grants the following commands:</p>
<blockquote>
<div><dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">rpm:package-bin</span></tt></dt>
<dd>Generates the <tt class="docutils literal"><span class="pre">.rpm</span></tt> package for this project.</dd>
<dt><tt class="docutils literal"><span class="pre">rpm:rpmlint</span></tt></dt>
<dd>Generates the <tt class="docutils literal"><span class="pre">.rpm</span></tt> file and runs the <tt class="docutils literal"><span class="pre">rpmlint</span></tt> command to look for issues in the package.  Useful for debugging.</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="customize">
<h2><a class="toc-backref" href="#id7">Customize</a><a class="headerlink" href="#customize" title="Permalink to this headline">¶</a></h2>
<div class="section" id="rpm-prefix">
<h3>Rpm Prefix<a class="headerlink" href="#rpm-prefix" title="Permalink to this headline">¶</a></h3>
<p>The rpm prefix allows you to create a relocatable package as defined by <a class="reference external" href="http://www.rpm.org/max-rpm/s1-rpm-reloc-prefix-tag.html">http://www.rpm.org/max-rpm/s1-rpm-reloc-prefix-tag.html</a>.
This optional setting with a handful of overrides to scriptlets and templates will allow you to create a working java_server
archetype that can be relocated in the file system.</p>
<p>Example Settings:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">defaultLinuxInstallLocation</span> <span class="o">:=</span> <span class="s">&quot;/opt/package_root&quot;</span><span class="o">,</span>
<span class="n">rpmPrefix</span> <span class="o">:=</span> <span class="nc">Some</span><span class="o">(</span><span class="n">defaultLinuxInstallLocation</span><span class="o">),</span>
<span class="n">linuxPackageSymlinks</span> <span class="o">:=</span> <span class="nc">Seq</span><span class="o">.</span><span class="n">empty</span><span class="o">,</span>
<span class="n">defaultLinuxLogsLocation</span> <span class="o">:=</span> <span class="n">defaultLinuxInstallLocation</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="n">name</span>
</pre></div>
</div>
</div>
<div class="section" id="rpmchangelogfile">
<h3>rpmChangelogFile<a class="headerlink" href="#rpmchangelogfile" title="Permalink to this headline">¶</a></h3>
<p>The rpmChangelogFile property allows you to set a source that will be imported and used on the RPM generation.
So if you use rpm commands to see the changelog it brings that information. You have to create the content on
that file following the RPM conventions that are available here <a class="reference external" href="http://fedoraproject.org/wiki/Packaging:Guidelines#Changelogs">http://fedoraproject.org/wiki/Packaging:Guidelines#Changelogs</a>.</p>
<p>Example Settings:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">changelog</span> <span class="o">:=</span> <span class="s">&quot;changelog.txt&quot;</span>

<span class="n">rpmChangelogFile</span> <span class="o">:=</span> <span class="nc">Some</span><span class="o">(</span><span class="n">changelog</span><span class="o">)</span>
</pre></div>
</div>
<div class="highlight-bash"><div class="highlight"><pre>* Sun Aug <span class="m">24</span> <span class="m">2014</span> Team &lt;contact@example.com&gt; - 1.1.0
-Allow to login using social networks
* Wed Aug <span class="m">20</span> <span class="m">2014</span> Team &lt;contact@example.com&gt; - 1.0.1
-Vulnerability fix.
* Tue Aug <span class="m">19</span> <span class="m">2014</span> Team &lt;contact@example.com&gt; - 1.0.0
-First version of the system
</pre></div>
</div>
</div>
<div class="section" id="template-changes">
<h3>Template Changes<a class="headerlink" href="#template-changes" title="Permalink to this headline">¶</a></h3>
<p>Apply the following changes to the default init start script.  You can find this in the sbt-native-packager source.</p>
<p><tt class="docutils literal"><span class="pre">src/templates/start</span></tt></p>
<div class="highlight-bash"><div class="highlight"><pre>...
<span class="o">[</span> -e /etc/sysconfig/<span class="nv">$prog</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> . /etc/sysconfig/<span class="nv">$prog</span>

<span class="c"># smb could define some additional options in $RUN_OPTS</span>
<span class="nv">RUN_CMD</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PACKAGE_PREFIX</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="p">{app_name</span><span class="si">}</span><span class="s2">}/bin/</span><span class="si">${</span><span class="p">{app_name</span><span class="si">}</span><span class="s2">}&quot;</span>
...
</pre></div>
</div>
</div>
<div class="section" id="scriptlet-changes">
<h3>Scriptlet Changes<a class="headerlink" href="#scriptlet-changes" title="Permalink to this headline">¶</a></h3>
<p>Changing the scripts can be done in two ways. Override the <tt class="docutils literal"><span class="pre">rpmPre</span></tt>, <tt class="docutils literal"><span class="pre">rpmPostun</span></tt> etc. scripts.
For example:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="c1">// overriding</span>
<span class="n">rpmPre</span> <span class="o">:=</span> <span class="nc">Some</span><span class="o">(</span><span class="s">&quot;&quot;&quot;## override all other enhancements</span>
<span class="s">   echo &quot;I take care of everything myself&quot;</span>
<span class="s">&quot;&quot;&quot;</span><span class="o">)</span>

<span class="c1">// appending different stuff depending if previous content is there</span>
<span class="n">rpmPostun</span> <span class="o">:=</span> <span class="n">rpmPost</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">map</span> <span class="o">{</span> <span class="n">content</span> <span class="k">=&gt;</span>
  <span class="s">s&quot;&quot;&quot;|</span><span class="si">$content</span><span class="s"></span>
<span class="s">     |echo &quot;I append this to the current content</span>
<span class="s">     |&quot;&quot;&quot;</span><span class="o">.</span><span class="n">stripMargin</span>
  <span class="o">}.</span><span class="n">orElse</span> <span class="o">{</span>
   <span class="nc">Option</span><span class="o">(</span><span class="s">&quot;&quot;&quot;echo &quot;There wasn&#39;t any previous content&quot;</span>
<span class="s">   &quot;&quot;&quot;</span><span class="o">.</span><span class="n">stripMargin</span><span class="o">)</span>
  <span class="o">}</span>

<span class="c1">// just appending</span>
<span class="n">rpmPostun</span> <span class="o">:=</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">prev</span> <span class="k">=</span> <span class="n">rpmPostun</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">getOrElse</span><span class="o">(</span><span class="s">&quot;&quot;</span><span class="o">)</span>
  <span class="nc">Some</span><span class="o">(</span><span class="s">s&quot;&quot;&quot;|</span><span class="si">$prev</span><span class="s"></span>
<span class="s">           | echo &quot;Hello you&quot;</span>
<span class="s">           |&quot;&quot;&quot;</span><span class="o">.</span><span class="n">stripMargin</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>
</div>
<p>or place your new scripts in the <tt class="docutils literal"><span class="pre">src/rpm/scriptlets</span></tt> folder. For example:</p>
<p><tt class="docutils literal"><span class="pre">src/rpm/scriptlets/preinst</span></tt></p>
<div class="highlight-bash"><div class="highlight"><pre>...
<span class="nb">echo</span> <span class="s2">&quot;PACKAGE_PREFIX=</span><span class="si">${</span><span class="nv">RPM_INSTALL_PREFIX</span><span class="si">}</span><span class="s2">&quot;</span> &gt; /etc/sysconfig/<span class="si">${</span><span class="p">{app_name</span><span class="si">}</span><span class="o">}</span>
...
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">src/rpm/scriptlets/preun</span></tt></p>
<div class="highlight-bash"><div class="highlight"><pre>...
rm /etc/sysconfig/<span class="si">${</span><span class="p">{app_name</span><span class="si">}</span><span class="o">}</span>
...
</pre></div>
</div>
<p>Using files will override all previous contents. The names used can be found in
the <a class="reference external" href="http://www.scala-sbt.org/sbt-native-packager/latest/api/#com.typesafe.sbt.packager.rpm.RpmPlugin$$Names$">Scaladocs</a>.</p>
</div>
<div class="section" id="jar-repackaging">
<h3>Jar Repackaging<a class="headerlink" href="#jar-repackaging" title="Permalink to this headline">¶</a></h3>
<p>rpm repackages jars by default (described in this <a class="reference external" href="http://swaeku.github.io/blog/2013/08/05/how-to-disable-brp-java-repack-jars-during-rpm-build">blog post</a>) in order to optimize jars.
This behaviour is turned off by default with this setting.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">rpmBrpJavaRepackJars</span> <span class="o">:=</span> <span class="kc">false</span>
</pre></div>
</div>
<p>Note that this appends content to your <tt class="docutils literal"><span class="pre">rpmPre</span></tt> definition, so make sure not to override it.
For more information on this topic follow these links:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/sbt/sbt-native-packager/issues/195">issue #195</a></li>
<li><a class="reference external" href="https://github.com/sbt/sbt-native-packager/pull/199">pullrequest #199</a></li>
<li><a class="reference external" href="https://github.com/sbt/sbt-native-packager/issues/215">OpenSuse issue</a></li>
</ul>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2014 sbt-native-packager team.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Writing Linux Packages &mdash; sbt-native-packager 1.0a1 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0a1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="sbt-native-packager 1.0a1 documentation" href="index.html" />
    <link rel="next" title="Debian" href="debian.html" />
    <link rel="prev" title="Project Archetypes" href="archetypes.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="debian.html" title="Debian"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="archetypes.html" title="Project Archetypes"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">sbt-native-packager 1.0a1 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Writing Linux Packages</a><ul>
<li><a class="reference internal" href="#settings">Settings</a></li>
<li><a class="reference internal" href="#package-mappings">Package Mappings</a><ul>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="archetypes.html"
                        title="previous chapter">Project Archetypes</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="debian.html"
                        title="next chapter">Debian</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/linux.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="writing-linux-packages">
<h1>Writing Linux Packages<a class="headerlink" href="#writing-linux-packages" title="Permalink to this headline">¶</a></h1>
<p>The native packager plugin is designed so that linux packages look similar, but can contain distribution specific information.</p>
<div class="section" id="settings">
<h2>Settings<a class="headerlink" href="#settings" title="Permalink to this headline">¶</a></h2>
<p>The required fields for any linux distribution are:</p>
<blockquote>
<div><dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">name</span> <span class="pre">in</span> <span class="pre">Linux</span></tt></dt>
<dd>The name given the package for installation.</dd>
<dt><tt class="docutils literal"><span class="pre">maintainer</span></tt></dt>
<dd>The name of the maintainer of the package (important for ownership and signing).</dd>
<dt><tt class="docutils literal"><span class="pre">packageSummary</span></tt></dt>
<dd>A one-sentence short summary of what the package does.</dd>
<dt><tt class="docutils literal"><span class="pre">packageDescription</span></tt></dt>
<dd>A longer description of what the package does and what it includes.</dd>
<dt><tt class="docutils literal"><span class="pre">linuxPackageMappings</span></tt></dt>
<dd>A list of files and their desired installation locations for the package, as well as other metainformation.</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="package-mappings">
<h2>Package Mappings<a class="headerlink" href="#package-mappings" title="Permalink to this headline">¶</a></h2>
<p>Most of the work in generating a linux package is constructing package mappings.  These 'map' a file to a location on disk where it should reside as well as information about that file.   Package mappings allow the specification of file ownership, permissions and whether or not the file can be considered &quot;configuration&quot;.</p>
<blockquote>
<div>Note that while the <tt class="docutils literal"><span class="pre">sbt-native-packager</span></tt> plugin allows you to specify all of this information, not all platforms will make use of the information.  It's best to be specific
about how you want files handled and run tests on each platform you wish to deploy to.</div></blockquote>
<p>A package mapping takes this general form</p>
<div class="highlight-python"><pre>(packageMapping(
    file -&gt; "/usr/share/man/man1/sbt.1.gz"
  ) withPerms "0644" gzipped) asDocs()</pre>
</div>
<p>Let's look at each of the methods supported in the packageMapping 'library'.</p>
<blockquote>
<div><dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">packageMapping(mappings:</span> <span class="pre">(File,</span> <span class="pre">String)*)</span></tt></dt>
<dd>This method takes a variable number of <tt class="docutils literal"><span class="pre">File</span> <span class="pre">-&gt;</span> <span class="pre">String</span></tt> pairs.  The <tt class="docutils literal"><span class="pre">File</span></tt> should be a locally available file that can be bundled,
and the <tt class="docutils literal"><span class="pre">String</span></tt> is the installation location on disk for that file.  This returns a new <tt class="docutils literal"><span class="pre">PackageMapping</span></tt> that supports the remaining methods.</dd>
<dt><tt class="docutils literal"><span class="pre">withPerms(mask:</span> <span class="pre">String)</span></tt></dt>
<dd>This function adjusts the installation permissions of the associated files.  The flags passed should be of the form of a mask, e.g. <tt class="docutils literal"><span class="pre">0755</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">gzipped</span></tt></dt>
<dd>This ensures that the files are written in compressed format to the destination.  This is a convenience for distributions that want files zipped.</dd>
<dt><tt class="docutils literal"><span class="pre">asDocs</span></tt></dt>
<dd>This denotes that the mapped files are documentation files.  <em>Note: I believe these are only used for ``RPM``s.</em></dd>
<dt><tt class="docutils literal"><span class="pre">withConfig(value:String=&quot;true&quot;)</span></tt></dt>
<dd>This denotes whether or not a <tt class="docutils literal"><span class="pre">%config</span></tt> attribute is attached to the given files in the generated rpm SPEC.  Any value other than <tt class="docutils literal"><span class="pre">&quot;true&quot;</span></tt> will be
placed inside the <tt class="docutils literal"><span class="pre">%config()`</span> <span class="pre">definition,</span> <span class="pre">for</span> <span class="pre">example</span> <span class="pre">``withConfig(&quot;noreplace&quot;)</span></tt> results in <tt class="docutils literal"><span class="pre">%config(noreplace)</span></tt> attribute in the rpm spec.</dd>
<dt><tt class="docutils literal"><span class="pre">withUser(user:String)</span></tt></dt>
<dd>This denotes which user should be the owner of the given files in the resulting package.</dd>
<dt><tt class="docutils literal"><span class="pre">withGroup(group:String)</span></tt></dt>
<dd>This denotes which group should be the owner of the given files in the resulting package.</dd>
</dl>
</div></blockquote>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="debian.html">Debian</a><ul>
<li class="toctree-l2"><a class="reference internal" href="debian.html#settings">Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="debian.html#tasks">Tasks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="redhat.html">RedHat</a><ul>
<li class="toctree-l2"><a class="reference internal" href="redhat.html#settings">Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="redhat.html#tasks">Tasks</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="debian.html" title="Debian"
             >next</a> |</li>
        <li class="right" >
          <a href="archetypes.html" title="Project Archetypes"
             >previous</a> |</li>
        <li><a href="index.html">sbt-native-packager 1.0a1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Josh Suereth.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Project Archetypes &mdash; sbt-native-packager 1.1.0-SNAPSHOT documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.2.0/yeti/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.1.0-SNAPSHOT',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="sbt-native-packager 1.1.0-SNAPSHOT documentation" href="../index.html" />
    <link rel="next" title="Java Application Archetype" href="java_app/index.html" />
    <link rel="prev" title="Contributing Documentation" href="../topics/documentation.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          sbt-native-packager</a>
        <span class="navbar-text navbar-version pull-left"><b>1.1.0-SNAPSHOT</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted.html#packaging-formats">Packaging Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted.html#archetypes">Archetypes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../gettingstarted.html#sitemap">Sitemap</a></li>
<li class="toctree-l1"><a class="reference internal" href="java_app/index.html">Java Application Archetype</a></li>
<li class="toctree-l1"><a class="reference internal" href="java_server/index.html">Java Server Application Archetype</a></li>
<li class="toctree-l1"><a class="reference internal" href="akka_app/index.html">Akka Microkernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="cheatsheet.html">Archetype Cheatsheet</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Project Archetypes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../formats/index.html">Packaging Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/index.html">Advanced Topics</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Project Archetypes</a><ul>
<li><a class="reference internal" href="#java-command-line-application">Java Command Line Application</a></li>
<li><a class="reference internal" href="#java-server">Java Server</a></li>
<li><a class="reference internal" href="#akka-microkernel-application">Akka Microkernel Application</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="../topics/documentation.html" title="Previous Chapter: Contributing Documentation"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Contributing ...</span>
    </a>
  </li>
  <li>
    <a href="java_app/index.html" title="Next Chapter: Java Application Archetype"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Java Applicat... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/archetypes/index.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="toctree-wrapper compound" id="archetypes">
<ul>
<li class="toctree-l1"><a class="reference internal" href="java_app/index.html">Java Application Archetype</a><ul>
<li class="toctree-l2"><a class="reference internal" href="java_app/index.html#features">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="java_app/index.html#usage">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="java_app/index.html#customize">Customize</a></li>
<li class="toctree-l2"><a class="reference internal" href="java_app/index.html#sitemap">Sitemap</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="java_server/index.html">Java Server Application Archetype</a><ul>
<li class="toctree-l2"><a class="reference internal" href="java_server/index.html#features">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="java_server/index.html#usage">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="java_server/index.html#customize">Customize</a></li>
<li class="toctree-l2"><a class="reference internal" href="java_server/index.html#service-managers">Service Managers</a></li>
<li class="toctree-l2"><a class="reference internal" href="java_server/index.html#sitemap">Sitemap</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="akka_app/index.html">Akka Microkernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="cheatsheet.html">Archetype Cheatsheet</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cheatsheet.html#path-configurations">Path Configurations</a></li>
<li class="toctree-l2"><a class="reference internal" href="cheatsheet.html#jvm-options">JVM Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="cheatsheet.html#overriding-templates">Overriding Templates</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="project-archetypes">
<h1>Project Archetypes<a class="headerlink" href="#project-archetypes" title="Permalink to this headline">¶</a></h1>
<p>Project archetypes are default deployment scripts that try to &#8220;do the right thing&#8221; for a given type of project.
Because not all projects are created equal, there is no one single archetype for all native packages, but a set
of them for usage.</p>
<p>The architecture of the plugin is set up so that you can customize your packages at any level of complexity.
For example, if you&#8217;d like to write Windows Installer XML by hand and manually map files, you should be able to do this while
still leveraging the default configuration for other platforms.</p>
<p>Currently, in the nativepackager these archetypes are available:</p>
<blockquote>
<div><ul class="simple">
<li>Java Command Line Application</li>
<li>Java Server Application</li>
<li>Additional Configuration Archetypes (e.g. ClasspathJarPlugin, AshScriptPlugin,..)</li>
</ul>
</div></blockquote>
<div class="section" id="java-command-line-application">
<h2>Java Command Line Application<a class="headerlink" href="#java-command-line-application" title="Permalink to this headline">¶</a></h2>
<p>A Java Command Line application is a Java application that consists of a set of JARs and a main method.  There is no
custom start scripts, or services.  It is just a bash/bat script that starts up a Java project.   To use
this archetype in your build, do the following in your <tt class="docutils literal"><span class="pre">build.sbt</span></tt>:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">enablePlugins</span><span class="o">(</span><span class="nc">JavaAppPackaging</span><span class="o">)</span>

<span class="n">name</span> <span class="o">:=</span> <span class="s">&quot;A-package-friendly-name&quot;</span>

<span class="n">packageSummary</span> <span class="n">in</span> <span class="nc">Linux</span> <span class="o">:=</span> <span class="s">&quot;The name you want displayed in package summaries&quot;</span>
<span class="n">packageSummary</span> <span class="n">in</span> <span class="nc">Windows</span> <span class="o">:=</span> <span class="s">&quot;The name you want displayed in Add/Remove Programs&quot;</span>
<span class="n">packageDescription</span> <span class="o">:=</span> <span class="s">&quot; A description of your project&quot;</span>

<span class="n">maintainer</span> <span class="n">in</span> <span class="nc">Windows</span> <span class="o">:=</span> <span class="s">&quot;Company&quot;</span>
<span class="n">maintainer</span> <span class="n">in</span> <span class="nc">Debian</span> <span class="o">:=</span> <span class="s">&quot;Your Name &lt;your@email.com&gt;&quot;</span>

<span class="n">wixProductId</span> <span class="o">:=</span> <span class="s">&quot;ce07be71-510d-414a-92d4-dff47631848a&quot;</span>
<span class="n">wixProductUpgradeId</span> <span class="o">:=</span> <span class="s">&quot;4552fb0e-e257-4dbd-9ecb-dba9dbacf424&quot;</span>
</pre></div>
</div>
<p>This archetype will use the <tt class="docutils literal"><span class="pre">mainClass</span></tt> setting of sbt (automatically discovers your main class) to generate <tt class="docutils literal"><span class="pre">bat</span></tt> and <tt class="docutils literal"><span class="pre">bin</span></tt> scripts for your project.
In case you have multiple main classes you can point to a specific class with the following setting:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">mainClass</span> <span class="n">in</span> <span class="nc">Compile</span> <span class="o">:=</span> <span class="nc">Some</span><span class="o">(</span><span class="s">&quot;foo.bar.Main&quot;</span><span class="o">)</span>
</pre></div>
</div>
<p>The universal layout produced looks like the following:</p>
<div class="highlight-none"><div class="highlight"><pre>bin/
  &lt;app_name&gt;       &lt;- BASH script
  &lt;app_name&gt;.bat   &lt;- cmd.exe script
lib/
   &lt;Your project and dependent jar files here.&gt;
</pre></div>
</div>
<p>You can add additional files to the project by placing things in <tt class="docutils literal"><span class="pre">src/windows</span></tt>, <tt class="docutils literal"><span class="pre">src/universal</span></tt> or <tt class="docutils literal"><span class="pre">src/linux</span></tt> as needed.</p>
<p>The scripts under <tt class="docutils literal"><span class="pre">bin</span></tt> will execute the <tt class="docutils literal"><span class="pre">main</span></tt> method of a class found in your application. But you can specific a custom main class method with the <tt class="docutils literal"><span class="pre">-main</span></tt> flag.</p>
<p>The default bash script also supports having a configuration file.  This config file can be used to specify default arguments to the BASH script.
To define a config location for your bash script, you can manually override the template defines:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">bashScriptConfigLocation</span> <span class="o">:=</span> <span class="s">&quot;$app_home/conf/my.conf&quot;</span>
</pre></div>
</div>
<p>This string can include any variable defines in the BASH script. In this case, <tt class="docutils literal"><span class="pre">app_home</span></tt> refers to the install location of the script.</p>
</div>
<div class="section" id="java-server">
<h2>Java Server<a class="headerlink" href="#java-server" title="Permalink to this headline">¶</a></h2>
<p>This archetype is designed for Java applications that are intended to run as
servers or services.  This archetype includes wiring an application to start
immediately upon startup. To activate this archetype replace <tt class="docutils literal"><span class="pre">enablePlugins(JavaAppPackaging)</span></tt> with <tt class="docutils literal"><span class="pre">enablePlugis(JavaServerAppPackaging)</span></tt>.</p>
<p>The Java Server archetype has a similar installation layout as the java
application archetype. The primary differences are:</p>
<ul class="simple">
<li>Linux<ul>
<li><tt class="docutils literal"><span class="pre">/var/log/&lt;pkg&gt;</span></tt> is symlinked from <tt class="docutils literal"><span class="pre">&lt;install&gt;/logs</span></tt></li>
<li>Creates a start script in <tt class="docutils literal"><span class="pre">/etc/init.d</span></tt> or <tt class="docutils literal"><span class="pre">/etc/init/</span></tt></li>
<li>Creates a startup config file in <tt class="docutils literal"><span class="pre">/etc/default/&lt;pkg&gt;</span></tt></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="akka-microkernel-application">
<h2>Akka Microkernel Application<a class="headerlink" href="#akka-microkernel-application" title="Permalink to this headline">¶</a></h2>
<div class="alert alert-danger" role="alert">
  <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
  The <em>Akka Microkernel Archetype</em> will be deprecated in favor of the more
  general and better maintained <em>Java App Archetype</em>
</div><p>An Akka microkernel application is similar to a Java Command Line application. Instead of running the classic <tt class="docutils literal"><span class="pre">mainClass</span></tt>,
an Akka microkernel application instantiates and runs a subclass of
<a class="reference external" href="https://github.com/akka/akka/blob/master/akka-kernel/src/main/scala/akka/kernel/Main.scala">Bootable</a> . A minimal example
could look like this</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">class</span> <span class="nc">HelloKernel</span> <span class="k">extends</span> <span class="nc">Bootable</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">system</span> <span class="k">=</span> <span class="nc">ActorSystem</span><span class="o">(</span><span class="s">&quot;hellokernel&quot;</span><span class="o">)</span>

  <span class="k">def</span> <span class="n">startup</span> <span class="k">=</span> <span class="o">{</span>
    <span class="c1">// HelloActor and Start case object must of course be defined</span>
    <span class="n">system</span><span class="o">.</span><span class="n">actorOf</span><span class="o">(</span><span class="nc">Props</span><span class="o">[</span><span class="kt">HelloActor</span><span class="o">])</span> <span class="o">!</span> <span class="nc">Start</span>
  <span class="o">}</span>

  <span class="k">def</span> <span class="n">shutdown</span> <span class="k">=</span> <span class="o">{</span>
    <span class="n">system</span><span class="o">.</span><span class="n">terminate</span><span class="o">()</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The <em>bash/bat</em> script that starts up the Akka application is copied from the Akka distribution.</p>
<p>To use this archetype in your build, add the following to your <tt class="docutils literal"><span class="pre">build.sbt</span></tt>:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">packageArchetype</span><span class="o">.</span><span class="n">akka_application</span>

<span class="n">name</span> <span class="o">:=</span> <span class="s">&quot;A-package-friendly-name&quot;</span>

<span class="n">mainClass</span> <span class="n">in</span> <span class="nc">Compile</span> <span class="o">:=</span> <span class="nc">Some</span><span class="o">(</span><span class="s">&quot;HelloKernel&quot;</span><span class="o">)</span>
</pre></div>
</div>
<p>For more information take a look at the akka docs</p>
<ul class="simple">
<li><a class="reference external" href="http://doc.akka.io/docs/akka/snapshot/scala/microkernel.html">Akka microkernel</a></li>
<li><a class="reference external" href="https://github.com/akka/akka/blob/master/akka-kernel/src/main/scala/akka/kernel/Main.scala">akka.kernel.Main source</a></li>
<li><a class="reference external" href="http://doc.akka.io/api/akka/snapshot/index.html#akka.kernel.Bootable">akka.kernel.Bootable docs</a></li>
</ul>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2014 sbt-native-packager team.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>
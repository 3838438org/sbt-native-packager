<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Writing Linux Packages &mdash; sbt-native-packager 1.0.0-M1 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.1.0/yeti/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.0-M1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="sbt-native-packager 1.0.0-M1 documentation" href="../index.html" />
    <link rel="up" title="Advanced Topics" href="index.html" />
    <link rel="next" title="Debian" href="debian.html" />
    <link rel="prev" title="Universal" href="universal.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          sbt-native-packager</a>
        <span class="navbar-text navbar-version pull-left"><b>1.0.0-M1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GettingStartedApplications/index.html">Getting Started with Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GettingStartedServers/index.html">Getting Started with Servers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation.html">Contributing Documentation</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Writing Linux Packages</a><ul>
<li><a class="reference internal" href="#settings">Settings</a></li>
<li><a class="reference internal" href="#package-mappings">Package Mappings</a><ul>
<li><a class="reference internal" href="#the-linuxpackagemapping-models">The LinuxPackageMapping Models</a></li>
<li><a class="reference internal" href="#modifying-mappings-in-general">Modifying Mappings in General</a></li>
<li><a class="reference internal" href="#add-mappings">Add Mappings</a></li>
<li><a class="reference internal" href="#filter-remove-mappings">Filter/Remove Mappings</a></li>
<li><a class="reference internal" href="#alter-linuxpackagemapping">Alter LinuxPackageMapping</a></li>
<li><a class="reference internal" href="#alter-linuxsymlinks">Alter LinuxSymlinks</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="universal.html" title="Previous Chapter: Universal"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; Universal</span>
    </a>
  </li>
  <li>
    <a href="debian.html" title="Next Chapter: Debian"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">Debian &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/DetailedTopics/linux.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="writing-linux-packages">
<span id="linux"></span><h1>Writing Linux Packages<a class="headerlink" href="#writing-linux-packages" title="Permalink to this headline">¶</a></h1>
<p>The native packager plugin is designed so that linux packages look similar, but can contain distribution specific information.</p>
<div class="section" id="settings">
<h2>Settings<a class="headerlink" href="#settings" title="Permalink to this headline">¶</a></h2>
<p>The required fields for any linux distribution are:</p>
<blockquote>
<div><dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">name</span> <span class="pre">in</span> <span class="pre">Linux</span></tt></dt>
<dd>The name given the package for installation.</dd>
<dt><tt class="docutils literal"><span class="pre">maintainer</span></tt></dt>
<dd>The name of the maintainer of the package (important for ownership and signing).</dd>
<dt><tt class="docutils literal"><span class="pre">packageSummary</span></tt></dt>
<dd>A one-sentence short summary of what the package does.</dd>
<dt><tt class="docutils literal"><span class="pre">packageDescription</span></tt></dt>
<dd>A longer description of what the package does and what it includes.</dd>
<dt><tt class="docutils literal"><span class="pre">linuxPackageMappings</span></tt></dt>
<dd>A list of files and their desired installation locations for the package, as well as other metainformation.</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="package-mappings">
<h2>Package Mappings<a class="headerlink" href="#package-mappings" title="Permalink to this headline">¶</a></h2>
<p>Most of the work in generating a linux package is constructing package mappings.  These &#8216;map&#8217; a file to a location on disk where it should
reside as well as information about that file. Package mappings allow the specification of file ownership, permissions and whether or not
the file can be considered &#8220;configuration&#8221;.</p>
<blockquote>
<div>Note that while the <tt class="docutils literal"><span class="pre">sbt-native-packager</span></tt> plugin allows you to specify all of this information, not all platforms will make use of the
information.  It&#8217;s best to be specific about how you want files handled and run tests on each platform you wish to deploy to.</div></blockquote>
<p>A package mapping takes this general form</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="o">(</span><span class="n">packageMapping</span><span class="o">(</span>
    <span class="n">file</span> <span class="o">-&gt;</span> <span class="s">&quot;/usr/share/man/man1/sbt.1.gz&quot;</span>
  <span class="o">)</span> <span class="n">withPerms</span> <span class="s">&quot;0644&quot;</span> <span class="n">gzipped</span><span class="o">)</span> <span class="n">asDocs</span><span class="o">()</span>
</pre></div>
</div>
<p>Let&#8217;s look at each of the methods supported in the packageMapping &#8216;library&#8217;.</p>
<blockquote>
<div><dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">packageMapping(mappings:</span> <span class="pre">(File,</span> <span class="pre">String)*)</span></tt></dt>
<dd>This method takes a variable number of <tt class="docutils literal"><span class="pre">File</span> <span class="pre">-&gt;</span> <span class="pre">String</span></tt> pairs.  The <tt class="docutils literal"><span class="pre">File</span></tt> should be a locally available file that can be bundled,
and the <tt class="docutils literal"><span class="pre">String</span></tt> is the installation location on disk for that file.  This returns a new <tt class="docutils literal"><span class="pre">PackageMapping</span></tt> that supports the remaining methods.</dd>
<dt><tt class="docutils literal"><span class="pre">withPerms(mask:</span> <span class="pre">String)</span></tt></dt>
<dd>This function adjusts the installation permissions of the associated files.  The flags passed should be of the form of a mask, e.g. <tt class="docutils literal"><span class="pre">0755</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">gzipped</span></tt></dt>
<dd>This ensures that the files are written in compressed format to the destination.  This is a convenience for distributions that want files zipped.</dd>
<dt><tt class="docutils literal"><span class="pre">asDocs</span></tt></dt>
<dd>This denotes that the mapped files are documentation files.  <em>Note: I believe these are only used for ``RPM``s.</em></dd>
<dt><tt class="docutils literal"><span class="pre">withConfig(value:String=&quot;true&quot;)</span></tt></dt>
<dd>This denotes whether or not a <tt class="docutils literal"><span class="pre">%config</span></tt> attribute is attached to the given files in the generated rpm SPEC.  Any value other than <tt class="docutils literal"><span class="pre">&quot;true&quot;</span></tt> will be
placed inside the <tt class="docutils literal"><span class="pre">%config()`</span> <span class="pre">definition,</span> <span class="pre">for</span> <span class="pre">example</span> <span class="pre">``withConfig(&quot;noreplace&quot;)</span></tt> results in <tt class="docutils literal"><span class="pre">%config(noreplace)</span></tt> attribute in the rpm spec.</dd>
<dt><tt class="docutils literal"><span class="pre">withUser(user:String)</span></tt></dt>
<dd>This denotes which user should be the owner of the given files in the resulting package.</dd>
<dt><tt class="docutils literal"><span class="pre">withGroup(group:String)</span></tt></dt>
<dd>This denotes which group should be the owner of the given files in the resulting package.</dd>
</dl>
</div></blockquote>
<div class="section" id="the-linuxpackagemapping-models">
<h3>The LinuxPackageMapping Models<a class="headerlink" href="#the-linuxpackagemapping-models" title="Permalink to this headline">¶</a></h3>
<p>All classes are located in the <tt class="docutils literal"><span class="pre">com.typesafe.sbt.packager.linux</span></tt> package. So if you want to create
instances yourself you have to add <tt class="docutils literal"><span class="pre">import</span> <span class="pre">com.typesafe.sbt.packager.linux._</span></tt> to your build file.</p>
<p>A <tt class="docutils literal"><span class="pre">LinuxPackageMapping</span></tt> contains the following fields:</p>
<blockquote>
<div><dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">mappings:</span> <span class="pre">Traversable[(File,</span> <span class="pre">String)]</span></tt></dt>
<dd>A list of mappings aggregated by this LinuxPackageMapping</dd>
<dt><tt class="docutils literal"><span class="pre">fileData:</span> <span class="pre">LinuxFileMetaData</span></tt></dt>
<dd>Permissions for all the defined mappings. Default to &#8220;root:root 755&#8221;</dd>
<dt><tt class="docutils literal"><span class="pre">zipped:</span> <span class="pre">Boolean</span></tt></dt>
<dd>Are the mappings zipped. Default to false</dd>
</dl>
</div></blockquote>
<p>All mappings are stored in the task <tt class="docutils literal"><span class="pre">linuxPackageMappings</span></tt> which returns a <tt class="docutils literal"><span class="pre">Seq[LinuxPackageMapping]</span></tt>. To display the contents
open the sbt console and call</p>
<div class="highlight-bash"><div class="highlight"><pre>show linuxPackageMappings
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">LinuxFileMetaData</span></tt> has the following fields</p>
<blockquote>
<div><dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">user:</span> <span class="pre">String</span></tt></dt>
<dd>The user owning all the mappings. Default &#8220;root&#8221;</dd>
<dt><tt class="docutils literal"><span class="pre">group:</span> <span class="pre">String</span></tt></dt>
<dd>The group owning all the mappings. Default &#8220;root&#8221;</dd>
<dt><tt class="docutils literal"><span class="pre">permissions:</span> <span class="pre">String</span></tt></dt>
<dd>Access permissions for all the mappings. Default &#8220;755&#8221;</dd>
<dt><tt class="docutils literal"><span class="pre">config:</span> <span class="pre">String</span></tt></dt>
<dd>Are the mappings config files. Default &#8220;false&#8221;</dd>
<dt><tt class="docutils literal"><span class="pre">docs:</span> <span class="pre">Boolean</span></tt></dt>
<dd>Are the mappings docs. Default to false</dd>
</dl>
</div></blockquote>
<p>Last but not least there are the <tt class="docutils literal"><span class="pre">linuxPackageSymlinks</span></tt>, which encapsulate symlinks on your
destination system. A <tt class="docutils literal"><span class="pre">LinuxSymlink</span></tt> contains only  two fields</p>
<blockquote>
<div><dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">link:</span> <span class="pre">String</span></tt></dt>
<dd>The actual link that points to <tt class="docutils literal"><span class="pre">destination</span></tt></dd>
<dt><tt class="docutils literal"><span class="pre">destination:</span> <span class="pre">String</span></tt></dt>
<dd>The link destination</dd>
</dl>
</div></blockquote>
<p>You can see all currently configured symlinks with this simple command.
<tt class="docutils literal"><span class="pre">linuxPackageSymlinks</span></tt> is just a <tt class="docutils literal"><span class="pre">Seq[LinuxSymlink]</span></tt></p>
<div class="highlight-bash"><div class="highlight"><pre>show linuxPackageSymlinks
</pre></div>
</div>
</div>
<div class="section" id="modifying-mappings-in-general">
<h3>Modifying Mappings in General<a class="headerlink" href="#modifying-mappings-in-general" title="Permalink to this headline">¶</a></h3>
<p>Adding, filtering and altering mappings are always simple methods on a sequence: <tt class="docutils literal"><span class="pre">Seq[LinuxPackageMapping]</span></tt>.
The basic contstruct for adding looks like this</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="c1">// simple</span>
<span class="n">linuxPackageMappings</span> <span class="o">+=</span> <span class="n">packageMapping</span><span class="o">(</span> <span class="o">(</span><span class="n">theFile</span><span class="o">,</span> <span class="s">&quot;/absolute/path/somefile.txt&quot;</span><span class="o">)</span> <span class="o">)</span>

<span class="c1">// specialized</span>
<span class="n">linuxPackageMappings</span> <span class="o">+=</span> <span class="n">packageMapping</span><span class="o">(</span> <span class="o">(</span><span class="n">theFile</span><span class="o">,</span> <span class="s">&quot;/absolute/path/somefile.txt&quot;</span><span class="o">)</span> <span class="o">)</span> <span class="n">withPerms</span><span class="o">(</span><span class="s">&quot;644&quot;</span><span class="o">)</span> <span class="n">asDocs</span><span class="o">()</span>
</pre></div>
</div>
<p>If you want to filter or alter things. The example has a lot of things you can _possibly_ do. Just pick
what you need. After this section there are smaller examples, showing how you can implemenet certain functions.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="c1">// sbt 0.13.0 syntax</span>
<span class="n">linuxPackageMappings</span> <span class="o">:=</span> <span class="o">{</span>
    <span class="c1">// mappings: Seq[LinuxPackageMapping]</span>
    <span class="k">val</span> <span class="n">mappings</span> <span class="k">=</span> <span class="n">linuxPackageMappings</span><span class="o">.</span><span class="n">value</span>
    <span class="c1">// this process will must return another Seq[LinuxPackageMapping]</span>
    <span class="n">mappings</span> <span class="n">map</span> <span class="o">{</span>  <span class="n">linuxPackage</span> <span class="k">=&gt;</span>
        <span class="c1">// basic scala collections operations. Seq[(java.io.File, String)]</span>
        <span class="k">val</span> <span class="n">filtered</span> <span class="k">=</span> <span class="n">linuxPackage</span><span class="o">.</span><span class="n">mappings</span> <span class="n">map</span> <span class="o">{</span>
            <span class="k">case</span> <span class="o">(</span><span class="n">file</span><span class="o">,</span> <span class="n">name</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">file</span> <span class="o">-&gt;</span> <span class="n">name</span> <span class="c1">// altering stuff here</span>
        <span class="o">}</span> <span class="n">filter</span> <span class="o">{</span>
            <span class="k">case</span> <span class="o">(</span><span class="n">file</span><span class="o">,</span> <span class="n">name</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="kc">true</span> <span class="c1">// remove stuff from mappings</span>
        <span class="o">}</span>
        <span class="c1">// case class copy method. Specify only what you need</span>
        <span class="k">val</span> <span class="n">fileData</span> <span class="k">=</span> <span class="n">linuxPackage</span><span class="o">.</span><span class="n">fileData</span><span class="o">.</span><span class="n">copy</span><span class="o">(</span>
            <span class="n">user</span> <span class="k">=</span> <span class="s">&quot;new user&quot;</span><span class="o">,</span>
            <span class="n">group</span> <span class="k">=</span> <span class="s">&quot;another group&quot;</span><span class="o">,</span>
            <span class="n">permissions</span> <span class="k">=</span> <span class="s">&quot;444&quot;</span><span class="o">,</span>
            <span class="n">config</span> <span class="k">=</span> <span class="s">&quot;false&quot;</span><span class="o">,</span>
            <span class="n">docs</span> <span class="k">=</span> <span class="kc">false</span>
        <span class="o">)</span>
        <span class="c1">// case class copy method. Specify only what you need.</span>
        <span class="c1">// returns a fresh LinuxPackageMapping</span>
        <span class="n">linuxPackage</span><span class="o">.</span><span class="n">copy</span><span class="o">(</span>
            <span class="n">mappings</span> <span class="k">=</span> <span class="n">filtered</span><span class="o">,</span>
            <span class="n">fileData</span> <span class="k">=</span> <span class="n">fileData</span>
        <span class="o">)</span>
    <span class="o">}</span> <span class="n">filter</span> <span class="o">{</span>
        <span class="n">linuxPackage</span> <span class="k">=&gt;</span> <span class="n">linuxPackage</span><span class="o">.</span><span class="n">mappings</span><span class="o">.</span><span class="n">nonEmpty</span> <span class="c1">// remove stuff. Here all empty linuxPackageMappings</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// sbt 0.12.x syntax</span>
<span class="n">linuxPackageMappings</span> <span class="o">&lt;&lt;=</span> <span class="n">linuxPackageMappings</span> <span class="n">map</span> <span class="o">{</span> <span class="n">mappings</span> <span class="k">=&gt;</span>
    <span class="cm">/* stuff. see above */</span>
    <span class="n">mappings</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The ordering in which you apply the tasks is important.</p>
</div>
<div class="section" id="add-mappings">
<h3>Add Mappings<a class="headerlink" href="#add-mappings" title="Permalink to this headline">¶</a></h3>
<p>To add an arbitrary file in your build path</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">linuxPackageMappings</span> <span class="o">+=</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">file</span> <span class="k">=</span> <span class="n">sourceDirectory</span><span class="o">.</span><span class="n">value</span> <span class="o">/</span> <span class="s">&quot;resources&quot;</span> <span class="o">/</span> <span class="s">&quot;somefile.txt&quot;</span>
  <span class="n">packageMapping</span><span class="o">(</span> <span class="o">(</span><span class="n">file</span><span class="o">,</span> <span class="s">&quot;/absolute/path/somefile.txt&quot;</span><span class="o">)</span> <span class="o">)</span>
<span class="o">}</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">linuxPackageMappings</span></tt> can be scoped to <tt class="docutils literal"><span class="pre">Rpm`</span> <span class="pre">or</span> <span class="pre">``Debian</span></tt> if you want to add mappings only for a single packacking type.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">linuxPackageMappings</span> <span class="n">in</span> <span class="nc">Debian</span> <span class="o">+=</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">file</span> <span class="k">=</span> <span class="n">sourceDirectory</span><span class="o">.</span><span class="n">value</span> <span class="o">/</span> <span class="s">&quot;resources&quot;</span> <span class="o">/</span> <span class="s">&quot;debian-somefile.txt&quot;</span>
  <span class="n">packageMapping</span><span class="o">(</span> <span class="o">(</span><span class="n">file</span><span class="o">,</span> <span class="s">&quot;/absolute/path/somefile.txt&quot;</span><span class="o">)</span> <span class="o">)</span>
<span class="o">}</span>

<span class="n">linuxPackageMappings</span> <span class="n">in</span> <span class="nc">Rpm</span> <span class="o">+=</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">file</span> <span class="k">=</span> <span class="n">sourceDirectory</span><span class="o">.</span><span class="n">value</span> <span class="o">/</span> <span class="s">&quot;resources&quot;</span> <span class="o">/</span> <span class="s">&quot;rpm-somefile.txt&quot;</span>
  <span class="n">packageMapping</span><span class="o">(</span> <span class="o">(</span><span class="n">file</span><span class="o">,</span> <span class="s">&quot;/absolute/path/somefile.txt&quot;</span><span class="o">)</span> <span class="o">)</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="filter-remove-mappings">
<h3>Filter/Remove Mappings<a class="headerlink" href="#filter-remove-mappings" title="Permalink to this headline">¶</a></h3>
<p>If you want to remove some mappings you have to filter the current list of <tt class="docutils literal"><span class="pre">linuxPackageMappings</span></tt>.
As <tt class="docutils literal"><span class="pre">linuxPackageMappings</span></tt> is a task, the order of your settings is important. Here are some examples
on how to filter mappings.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="c1">// this is equal to</span>
<span class="c1">// linuxPackageMappings &lt;&lt;= linuxPackageMappings map { mappings =&gt; /* stuff */ mappings }</span>
<span class="n">linuxPackageMappings</span> <span class="o">:=</span> <span class="o">{</span>
    <span class="c1">// first get the current mappings. mapping is of type Seq[LinuxPackageMapping]</span>
    <span class="k">val</span> <span class="n">mappings</span> <span class="k">=</span> <span class="n">linuxPackageMappings</span><span class="o">.</span><span class="n">value</span>
    <span class="c1">// map over the mappings if you want to change them</span>
    <span class="n">mappings</span> <span class="n">map</span> <span class="o">{</span> <span class="n">mapping</span> <span class="k">=&gt;</span>
        <span class="c1">// we remove everything besides files that end with &quot;.conf&quot;</span>
        <span class="k">val</span> <span class="n">filtered</span> <span class="k">=</span> <span class="n">mapping</span><span class="o">.</span><span class="n">mappings</span> <span class="n">filter</span> <span class="o">{</span>
            <span class="k">case</span> <span class="o">(</span><span class="n">file</span><span class="o">,</span> <span class="n">name</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">name</span> <span class="n">endsWith</span> <span class="s">&quot;.conf&quot;</span>
        <span class="o">}</span>
        <span class="c1">// now we copy the mapping but replace the mappings</span>
        <span class="n">mapping</span><span class="o">.</span><span class="n">copy</span><span class="o">(</span><span class="n">mappings</span> <span class="k">=</span> <span class="n">filtered</span><span class="o">)</span>
    <span class="o">}</span> <span class="n">filter</span> <span class="o">{</span>
        <span class="c1">// remove all LinuxPackageMapping instances that have to file mappings</span>
        <span class="k">_</span><span class="o">.</span><span class="n">mappings</span><span class="o">.</span><span class="n">nonEmpty</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alter-linuxpackagemapping">
<h3>Alter LinuxPackageMapping<a class="headerlink" href="#alter-linuxpackagemapping" title="Permalink to this headline">¶</a></h3>
<p>First we alter the permissions for all <a href="#id1"><span class="problematic" id="id2">``</span></a>LinuxPackageMapping``s that match a specific criteria.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="c1">// Altering permissions for configs</span>
<span class="n">linuxPackageMappings</span> <span class="o">:=</span> <span class="o">{</span>
    <span class="k">val</span> <span class="n">mappings</span> <span class="k">=</span> <span class="n">linuxPackageMappings</span><span class="o">.</span><span class="n">value</span>
    <span class="c1">// Changing the group for all configs</span>
    <span class="n">mappings</span> <span class="n">map</span> <span class="o">{</span>
        <span class="k">case</span> <span class="n">linuxPackage</span> <span class="k">if</span> <span class="n">linuxPackage</span><span class="o">.</span><span class="n">fileData</span><span class="o">.</span><span class="n">config</span> <span class="n">equals</span> <span class="s">&quot;true&quot;</span> <span class="k">=&gt;</span>
            <span class="c1">// altering the group</span>
            <span class="k">val</span> <span class="n">newFileData</span> <span class="k">=</span> <span class="n">linuxPackage</span><span class="o">.</span><span class="n">fileData</span><span class="o">.</span><span class="n">copy</span><span class="o">(</span>
                <span class="n">group</span> <span class="k">=</span> <span class="s">&quot;appdocs&quot;</span>
            <span class="o">)</span>
            <span class="c1">// altering the LinuxPackageMapping</span>
            <span class="n">linuxPackage</span><span class="o">.</span><span class="n">copy</span><span class="o">(</span>
                <span class="n">fileData</span> <span class="k">=</span> <span class="n">newFileData</span>
            <span class="o">)</span>
        <span class="k">case</span> <span class="n">linuxPackage</span> <span class="k">=&gt;</span> <span class="n">linuxPackage</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alter-linuxsymlinks">
<h3>Alter LinuxSymlinks<a class="headerlink" href="#alter-linuxsymlinks" title="Permalink to this headline">¶</a></h3>
<p>First we alter the permissions for all <a href="#id3"><span class="problematic" id="id4">``</span></a>LinuxPackageMapping``s that match a specific criteria.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="c1">// The same as linuxPackageMappings</span>
<span class="n">linuxPackageSymlinks</span> <span class="o">:=</span> <span class="o">{</span>
    <span class="k">val</span> <span class="n">links</span> <span class="k">=</span> <span class="n">linuxPackageSymlinks</span><span class="o">.</span><span class="n">value</span>

    <span class="n">links</span> <span class="n">filter</span> <span class="o">{</span> <span class="cm">/* remove stuff */</span> <span class="o">}</span> <span class="n">map</span> <span class="o">{</span> <span class="cm">/* change stuff */</span><span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="debian.html">Debian</a><ul>
<li class="toctree-l2"><a class="reference internal" href="debian.html#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="debian.html#settings">Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="debian.html#tasks">Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="debian.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="redhat.html">RedHat</a><ul>
<li class="toctree-l2"><a class="reference internal" href="redhat.html#settings">Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="redhat.html#tasks">Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="redhat.html#rpm-prefix">Rpm Prefix</a></li>
<li class="toctree-l2"><a class="reference internal" href="redhat.html#rpmchangelogfile">rpmChangelogFile</a></li>
<li class="toctree-l2"><a class="reference internal" href="redhat.html#jar-repackaging">Jar Repackaging</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2014 sbt-native-packager team.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>